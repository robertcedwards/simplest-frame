import mainLayout from '../layouts/main';
import { getFramer, setFramer } from '../data/framer';
import { getCount, incrementCount } from '../data/count';

const build = async (frameData) => {
    const { payload } = frameData;
    const count = await getCount();
    const lastFramerUsername = await getFramer() || '';

    if (payload) {
        incrementCount(count);
        setFramer(payload.untrustedData.fid);
    }

    const html = String.raw;
    const frameHTML = html`
        <fc-frame>
        <div class="web3-profile-base"><div class="profile-avatar"><img alt="0xHashbrown (0xhashbrown) Profile Photo" loading="lazy" width="0" height="0" decoding="async" data-nimg="1" class="avatar" style="color:transparent;width:100%;height:auto" src="https://i.seadn.io/gcs/files/e573dda3f886d25276f4821beaca506e.jpg?w=500&amp;auto=format"></div><h1 class="text-assistive">0xHashbrown (0xhashbrown) Farcaster Web3 Profile</h1><h2 class="text-assistive">Explore 0xHashbrown (0xhashbrown) Web3 identity profiles, social links, NFT collections, Web3 activities, dWebsites, POAPs etc on the Web3.bio profile page.</h2><div class="profile-name">0xHashbrown</div><h3 class="text-assistive">0xHashbrown (0xhashbrown)‚Äòs wallet address is 0xfe3a509f8e8eb59209cc8c9b90f7b352781e96f4</h3><div class="profile-identity"><div class="btn-group dropdown"><div title="Copy this wallet address" class="btn btn-sm" data-clipboard-text="0xfe3a509f8e8eb59209cc8c9b90f7b352781e96f4"><svg width="20" height="20" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="action-gray"><path d="M24.5556 26.0401H7.44444C6.79614 26.0401 6.17438 25.7826 5.71596 25.3241C5.25754 24.8657 5 24.244 5 23.5957V12.5957C5 11.9473 5.25754 11.3256 5.71596 10.8672C6.17438 10.4087 6.79614 10.1512 7.44444 10.1512H24.5556C25.2039 10.1512 25.8256 10.4087 26.284 10.8672C26.7425 11.3256 27 11.9473 27 12.5957V23.5957C27 24.244 26.7425 24.8657 26.284 25.3241C25.8256 25.7826 25.2039 26.0401 24.5556 26.0401Z"></path><path d="M21.5 18.7068C21.338 18.7068 21.1825 18.6424 21.0679 18.5278C20.9533 18.4132 20.8889 18.2577 20.8889 18.0957C20.8889 17.9336 20.9533 17.7781 21.0679 17.6635C21.1825 17.5489 21.338 17.4846 21.5 17.4846C21.6621 17.4846 21.8175 17.5489 21.9321 17.6635C22.0468 17.7781 22.1111 17.9336 22.1111 18.0957C22.1111 18.2577 22.0468 18.4132 21.9321 18.5278C21.8175 18.6424 21.6621 18.7068 21.5 18.7068Z"></path><path d="M23.3333 10.1512V8.44376C23.3332 8.06916 23.247 7.69958 23.0814 7.36359C22.9157 7.02759 22.6751 6.73415 22.378 6.50595C22.081 6.27774 21.7354 6.12086 21.3681 6.04743C21.0007 5.97399 20.6214 5.98597 20.2594 6.08243L6.815 9.66721C6.2944 9.80594 5.83421 10.1128 5.50599 10.54C5.17776 10.9673 4.99988 11.491 5 12.0298V12.5957"></path></svg><span class="profile-label ml-1 mr-1">0xfe3a...96f4</span></div><div title="Copy this wallet address" class="btn btn-sm" data-clipboard-text="0xfe3a509f8e8eb59209cc8c9b90f7b352781e96f4"><svg width="20" height="20" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="action"><path d="M25.2536 26H13.0622C12.65 26 12.3158 25.6659 12.3158 25.2536V13.0622C12.3158 12.65 12.65 12.3158 13.0622 12.3158H25.2536C25.6659 12.3158 26 12.65 26 13.0622V25.2536C26 25.6659 25.6659 26 25.2536 26Z"></path><path d="M19.6842 12.2201V6.74641C19.6842 6.33418 19.3501 6 18.9378 6H6.74641C6.33418 6 6 6.33418 6 6.74641V18.9378C6 19.3501 6.33418 19.6842 6.74641 19.6842H12.2201"></path></svg></div><div class="btn btn-sm dropdown-toggle" tabindex="0"><svg width="20" height="20" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="action" style="transform: rotate(90deg);"><path d="M16 17C16.5523 17 17 16.5523 17 16C17 15.4477 16.5523 15 16 15C15.4477 15 15 15.4477 15 16C15 16.5523 15.4477 17 16 17Z"></path><path d="M23 17C23.5523 17 24 16.5523 24 16C24 15.4477 23.5523 15 23 15C22.4477 15 22 15.4477 22 16C22 16.5523 22.4477 17 23 17Z"></path><path d="M9 17C9.55228 17 10 16.5523 10 16C10 15.4477 9.55228 15 9 15C8.44772 15 8 15.4477 8 16C8 16.5523 8.44772 17 9 17Z"></path></svg></div><ul class="menu"><li class="menu-item dropdown-menu-item"><a target="_blank" href="https://etherscan.io/address/0xfe3a509f8e8eb59209cc8c9b90f7b352781e96f4"><svg fill="none" height="20" viewBox="0 0 32 32" width="20" xmlns="http://www.w3.org/2000/svg" class="action mr-1"><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m20.6667 20.6667 4.6666 4.6666"></path><path d="m6.66666 14.6667c0 4.4182 3.58174 8 8.00004 8 2.2129 0 4.2161-.8986 5.6644-2.3507 1.4433-1.4471 2.3356-3.444 2.3356-5.6493 0-4.4183-3.5818-8.00003-8-8.00003-4.4183 0-8.00004 3.58173-8.00004 8.00003z"></path></g></svg>View on Etherscan</a></li><li class="menu-item dropdown-menu-item"><a target="_blank" href="https://debank.com/profile/0xfe3a509f8e8eb59209cc8c9b90f7b352781e96f4"><svg width="20" height="20" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" class="action mr-1"><path d="M24.5556 26.0401H7.44444C6.79614 26.0401 6.17438 25.7826 5.71596 25.3241C5.25754 24.8657 5 24.244 5 23.5957V12.5957C5 11.9473 5.25754 11.3256 5.71596 10.8672C6.17438 10.4087 6.79614 10.1512 7.44444 10.1512H24.5556C25.2039 10.1512 25.8256 10.4087 26.284 10.8672C26.7425 11.3256 27 11.9473 27 12.5957V23.5957C27 24.244 26.7425 24.8657 26.284 25.3241C25.8256 25.7826 25.2039 26.0401 24.5556 26.0401Z"></path><path d="M21.5 18.7068C21.338 18.7068 21.1825 18.6424 21.0679 18.5278C20.9533 18.4132 20.8889 18.2577 20.8889 18.0957C20.8889 17.9336 20.9533 17.7781 21.0679 17.6635C21.1825 17.5489 21.338 17.4846 21.5 17.4846C21.6621 17.4846 21.8175 17.5489 21.9321 17.6635C22.0468 17.7781 22.1111 17.9336 22.1111 18.0957C22.1111 18.2577 22.0468 18.4132 21.9321 18.5278C21.8175 18.6424 21.6621 18.7068 21.5 18.7068Z"></path><path d="M23.3333 10.1512V8.44376C23.3332 8.06916 23.247 7.69958 23.0814 7.36359C22.9157 7.02759 22.6751 6.73415 22.378 6.50595C22.081 6.27774 21.7354 6.12086 21.3681 6.04743C21.0007 5.97399 20.6214 5.98597 20.2594 6.08243L6.815 9.66721C6.2944 9.80594 5.83421 10.1128 5.50599 10.54C5.17776 10.9673 4.99988 11.491 5 12.0298V12.5957"></path></svg>View assets on DeBank</a></li><li class="menu-item dropdown-menu-item"><a href="/"><svg fill="none" height="20" viewBox="0 0 32 32" width="20" xmlns="http://www.w3.org/2000/svg" class="action mr-1"><path d="m9 23 13.9999-14m0 0v12.44m0-12.44h-12.4399" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg>Download Profile vCard</a></li></ul></div><button class="profile-share btn btn-sm ml-2" title="Share this profile"><svg fill="none" height="20" viewBox="0 0 32 32" width="20" xmlns="http://www.w3.org/2000/svg"><g stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 16v8c0 .5304.21071 1.0391.58579 1.4142.37507.3751.88378.5858 1.41421.5858h12c.5304 0 1.0391-.2107 1.4142-.5858s.5858-.8838.5858-1.4142v-8"></path><path d="m20 10-4-4-4 4"></path><path d="m16 6v13"></path></g></svg>Share</button></div><div class="profile-badges"><a class="platform-badge farcaster active" title="0xHashbrown (0xhashbrown) Farcaster: 0xhashbrown" style="--badge-primary-color:#8a63d2;--badge-bg-color:rgba(138, 99, 210, 0.1)" href="/0xhashbrown.farcaster"><div class="platform-badge-icon"><svg fill="#8a63d2" height="32" viewBox="0 0 32 32" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m6.72861 3.03262c-.05183.03293-.07239.49493-.08337 1.87494l-.01473 1.83131-2.29261.01445c-1.49367.00945-2.29261.03404-2.29261.07058 0 .09865.38919 1.77142.44241 1.90162.0282.06891.13088.46866.22815.88842.20633.89076.18646.86636.7214.88776.28943.0115.41267.0375.40878.086-.00305.0382-.00931 3.3839-.01389 7.4348l-.00834 7.3653-.15284.0613c-.61094.2451-.70056.389-.73641 1.1824l-.02779.6158-.1791.0579c-.54453.1759-.74851.5353-.726 1.2788l.01584.5274 4.43238-.0006c2.43781-.0004 4.51992-.0008 4.62692-.0011l.1945-.0005v-.5864c0-.7903-.148-1.0523-.6742-1.1941-.1182-.0318-.216-.0882-.217-.1252-.03-1.0041-.0432-1.1393-.1267-1.2995-.1077-.2064-.36863-.4074-.52898-.4074-.28372 0-.27483.1519-.25149-4.3169.02307-4.4298.03057-4.5612.30929-5.3816.79158-2.3292 2.74368-3.9726 5.24398-4.4145.8626-.1525 2.405-.007 2.9833.2815.0531.0264.1357.048.1838.048.142 0 .9649.4137 1.4169.7121 1.1625.768 2.2548 2.2155 2.6081 3.4563.0392.1376.1042.3627.1445.5002.1623.5532.1906 1.3086.1908 5.0961l.0001 3.8458-.1235.0864c-.0679.0477-.1594.0866-.2031.0866-.3687 0-.6182.4689-.6182 1.1617v.5561l-.2633.1164c-.5516.244-.6815.482-.6815 1.2486 0 .4673.0115.5299.0972.5305 2.2446.0155 9.1502-.0074 9.1876-.0305.0287-.0177.0518-.2498.0511-.5154-.0018-.7374-.2137-1.0966-.7285-1.2353l-.2151-.0579-.001-.5675c-.0012-.8-.2053-1.1143-.8298-1.2776l-.114-.0299v-7.4527-7.4527l.4029-.0008c.5714-.0013.5195.0895.9355-1.63875.0884-.36682.2128-.85452.2764-1.08378.1917-.68987.2254-.84882.1958-.9258-.0225-.05877-.478-.07628-2.295-.08795l-2.2668-.01445-.0278-1.86188-.0277-1.86188-9.2538-.0132c-5.0896-.00722-9.2847.00667-9.32249.03071z" fill-rule="evenodd"></path></svg></div><span class="platform-badge-name">0xhashbrown</span></a><a class="platform-badge ENS" title="0xHashbrown (0xhashbrown) ENS: 0xhashbrown.eth" style="--badge-primary-color:#5298FF;--badge-bg-color:rgba(82, 152, 255, 0.1)" href="/0xhashbrown.eth"><div class="platform-badge-icon"><svg fill="#5298FF" height="32" viewBox="0 0 32 32" width="20" xmlns="http://www.w3.org/2000/svg"><path d="m5.7592 7.55037c.30026-.55738.73349-1.03257 1.26171-1.38361l8.86329-6.16676-9.08157 14.9623s-.79345-1.3361-1.10301-2.0121c-.38558-.85-.58007-1.7737-.5698-2.7065.01027-.93276.22512-1.85203.62938-2.69333zm-3.65802 10.32143c.10009 1.4308.50582 2.8238 1.19009 4.0857.68417 1.262 1.63113 2.3637 2.77739 3.2314l9.80364 6.8111s-6.13378-8.8074-11.30729-17.5713c-.52382-.9259-.87594-1.9383-1.03952-2.9885-.0724-.4756-.0724-.9594 0-1.435-.13492.2491-.39673.759-.39673.759-.5246 1.0659-.8819 2.2058-1.05938 3.3799-.10214 1.2409-.09148 2.4886.0318 3.7277zm24.99522 1.1858c-.3175-.6759-1.1031-2.0121-1.1031-2.0121l-9.0656 14.9545 8.8633-6.1628c.5281-.3511.9615-.8262 1.2617-1.3836.4043-.8414.619-1.7606.6294-2.6933.0103-.9328-.1842-1.8566-.5699-2.7066zm3.5984-4.9255c-.1001-1.4307-.5058-2.8238-1.19-4.0857-.6843-1.26192-1.6312-2.36366-2.7775-3.23128l-9.7878-6.81512s6.1298 8.80737 11.3074 17.5713c.5224.9262.8731 1.9385 1.0355 2.9885.0724.4756.0724.9594 0 1.435.1349-.2491.3967-.759.3967-.759.5246-1.0659.8819-2.2058 1.0593-3.3799.1035-1.2409.0942-2.4885-.0277-3.7277z"></path></svg></div><span class="platform-badge-name">0xhashbrown.eth</span></a><a class="platform-badge lens" title="0xHashbrown (0xhashbrown) Lens: 0xhashbrown.lens" style="--badge-primary-color:#6bc674;--badge-bg-color:rgba(107, 198, 116, 0.1)" href="/0xhashbrown.lens"><div class="platform-badge-icon"><svg width="20" height="32" viewBox="0 0 32 32" fill="#6bc674" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M22.0292 11.3357C23.3409 10.2413 24.8043 9.82497 26.2077 9.93024C27.7048 10.0425 29.0901 10.7442 30.1249 11.7635C31.1594 12.7828 31.8702 14.1462 31.984 15.6176C32.0988 17.1025 31.6016 18.6576 30.2909 20.0224C30.1711 20.1482 30.0486 20.2722 29.9234 20.3947C23.9781 26.2511 16.0808 26.2666 16 26.2666H15.9996C15.9593 26.2666 8.03691 26.2663 2.07629 20.3941L2.07501 20.3926C1.95195 20.2707 1.83077 20.1479 1.7114 20.0245L1.71045 20.0233C0.399076 18.6597 -0.0985585 17.1049 0.0158883 15.6201C0.129292 14.1489 0.839608 12.7854 1.87395 11.7657C2.90821 10.7461 4.29343 10.0438 5.79075 9.93101C7.19409 9.82533 8.65776 10.2412 9.97008 11.335C10.1112 9.64793 10.8464 8.33492 11.9136 7.43225C13.0517 6.4695 14.535 6 15.9997 6C17.4644 6 18.9476 6.4695 20.0857 7.43225C21.153 8.33504 21.8883 9.64829 22.0292 11.3357ZM16.2718 25.6729L16.2716 25.6655H16.2721L16.2718 25.6729ZM15.7275 25.6729L15.7273 25.6655H15.7278L15.7275 25.6729ZM20.4663 17.5408C20.3036 17.5408 20.2473 17.7722 20.351 17.8948C20.5346 18.1119 20.6451 18.3913 20.6451 18.696C20.6451 19.3876 20.0762 19.9482 19.3743 19.9482C18.6723 19.9482 18.1032 19.3876 18.1032 18.696C18.1032 18.659 18.0542 18.6407 18.0321 18.6706C17.8316 18.9419 17.6963 19.2464 17.6406 19.5661C17.6094 19.7461 17.4608 19.8955 17.2741 19.8955H17.1711C16.9274 19.8955 16.7265 19.7008 16.7624 19.465C17.0089 17.8493 18.6252 16.6775 20.4663 16.6775C22.3073 16.6775 23.9236 17.8493 24.17 19.465C24.2058 19.7008 24.0049 19.8955 23.7614 19.8955C23.5176 19.8955 23.3248 19.6998 23.2718 19.4671C23.0309 18.4081 21.9139 17.5408 20.4663 17.5408ZM9.17953 18.696C9.17953 18.6472 9.11534 18.621 9.08512 18.6599C8.87083 18.9354 8.72482 19.2473 8.66301 19.5761C8.62653 19.7703 8.46615 19.9318 8.26432 19.9318H8.18868C7.94506 19.9318 7.74409 19.7372 7.78001 19.5015C8.02636 17.8849 9.64284 16.714 11.4838 16.714C13.3248 16.714 14.9413 17.8849 15.1876 19.5015C15.2236 19.7372 15.0226 19.9318 14.7789 19.9318C14.5354 19.9318 14.3424 19.7363 14.2895 19.5036C14.0487 18.4439 12.9317 17.5772 11.4838 17.5772C11.3522 17.5772 11.304 17.7593 11.3921 17.8549C11.5968 18.0772 11.7216 18.3723 11.7216 18.696C11.7216 19.3876 11.1525 19.9482 10.4506 19.9482C9.74858 19.9482 9.17953 19.3876 9.17953 18.696ZM17.4136 21.7159C17.5858 21.5472 17.8519 21.4652 18.0657 21.5794C18.2795 21.6938 18.3606 21.9591 18.2065 22.1439C17.7047 22.745 16.8923 23.1262 15.9963 23.1262C15.1007 23.1262 14.2865 22.7492 13.7841 22.1433C13.6306 21.9582 13.7127 21.6929 13.9269 21.5794C14.1411 21.4658 14.4067 21.549 14.5787 21.7177C14.9099 22.0431 15.4124 22.2631 15.9963 22.2631C16.5786 22.2631 17.0817 22.0407 17.4136 21.7159Z"></path></svg></div><span class="platform-badge-name">0xhashbrown.lens</span></a><a class="platform-badge unstoppabledomains" title="0xHashbrown (0xhashbrown) Unstoppable Domains: 0xhashbrown.dao" style="--badge-primary-color:#2E65F5;--badge-bg-color:rgba(46, 101, 245, 0.1)" href="/0xhashbrown.dao"><div class="platform-badge-icon"><svg width="20" height="32" viewBox="0 0 32 32" fill="#2E65F5" xmlns="http://www.w3.org/2000/svg"><path d="M0 25.5767L0.00174544 25.5749L0.00610904 25.5723L0 25.5767L0.0113454 25.5679L6.0462 21.028L5.99995 20.0593V12.0347L11.9999 8.72444V16.5484L19 11.2824V4.86266L26.0001 1V6.01552L32 1.50181V2.50457L26.0001 6.82977V7.64489L32 3.50732V4.51008L26.0001 8.45913V9.27425L32 5.51283V6.51559L26.0001 10.0885V10.9036L32 7.51834V8.5211L26.0001 11.7187V12.533L32 9.52385V10.5266L26.0001 13.3472V14.1624L32 11.5294V12.5321L26.0001 14.9766V20.0558C26.0001 25.5959 21.523 30.0869 16.0004 30.0869C11.4824 30.0869 7.66422 27.0812 6.42496 22.955L0.0043636 25.5749L0 25.5767ZM6.32372 22.6024L0.00785447 25.5723L0.00523632 25.574L6.37172 22.7805L6.32372 22.6024ZM6.10991 21.5543L0.0113454 25.5679L0.00610904 25.5723L6.13784 21.7288L6.10991 21.5543ZM6.23907 22.2525L0.0157089 25.5688L6.28009 22.427L6.23907 22.2525ZM6.06365 21.2052L0.0191998 25.5636L6.08634 21.3797L6.06453 21.2043L6.06365 21.2052ZM18.9991 17.8348L12.0514 20.6667C12.3376 22.317 13.7724 23.572 15.4995 23.572C17.4326 23.572 18.9991 22.0002 18.9991 20.0611V17.8356V17.8348ZM18.9991 16.6426L11.999 19.9345V20.0602C11.999 20.1431 12.0016 20.2251 12.0077 20.3063L18.9991 17.2378V16.6426ZM18.9991 15.4522L11.999 19.1822V19.5575L18.9991 16.0466V15.4522ZM18.9991 14.2601L11.999 18.4291V18.8061L18.9991 14.8562V14.2601ZM18.9991 13.0688L11.999 17.6777V18.0538L18.9991 13.6649V13.0688ZM18.9991 11.8784L11.9999 16.9245V17.2998L19 12.4719V11.8767L18.9991 11.8784ZM0.00523632 25.574L0.0043636 25.5749L0.00785447 25.5723L6.20242 22.077L6.16838 21.9025L0.00610904 25.5723L0.0043636 25.5749H0.00174544L0.00523632 25.574Z"></path></svg></div><span class="platform-badge-name">0xhashbrown.dao</span></a></div><h2 class="profile-description">@AmbireWallet | @thebeandao | JokeDAO Maxi üÉè| üè∞ | üå∏, üåø | 0xHashbrown.lens /.eth | 0xHashbrown .‚åê‚ó®-‚ó® | @nounish| @dtxhikers</h2><div class="profile-location"><span style="font-size:20px;margin-right:5px">üìç</span> <!-- -->Austin, TX, USA</div></div>
            
            
            
                ${lastFramerUsername || ''}
   
    `;

    return mainLayout(frameData, frameHTML);
}

export const buttons = [
    { 
        label: 'Frame me!',
        goTo: 'count',
    },
    { 
        label: 'View credits',
        goTo: 'credits',
    }
]

export default {
    build,
    buttons
};
